@model B2B_Deneme.ViewModels.VMMusteriler
@section Scripts {
    <script src="~/js/forcreateorder/formoperations.js"></script>
}


<div class="container invoice">
    <div class="row">
        <div class="col-sm-12">
            <div class="card">
                <div class="card-body" id="bodyContent2">
                    <div id="bodyContent">
                        <div>
                            <div class="row invo-header">
                                <div class="col-sm-6">
                                    <div class="media">
                                        <div class="media-left"><a href="index.html"><img class="media-object img-60" src="~/images/logo/logo-1.png" alt=""></a></div>
                                        <div class="media-body m-l-20">
                                            <h4 class="media-heading f-w-600">Sipariş Formu</h4>
                                            <p>Firmamız Bilgileri Gelicek<br><span class="digits">289-335-6503</span></p>
                                        </div>
                                    </div>
                                    <!-- End Info-->
                                </div>
                                <div class="col-sm-6">
                                    <div class="text-md-end text-xs-center">
                                        <h3>@Model.OrderPrintInformations[0]["SipNo"]<span class="digits counter"></span></h3>
                                        <p>Sipariş Tarihi: @Model.OrderPrintInformations[0]["KTRH"]<span class="digits"></span><br>                                                            Teslim Tarihi: @Model.OrderPrintInformations[0]["TESTRH"]<span class="digits"></span></p>
                                    </div>
                                    <!-- End Title-->
                                </div>
                            </div>
                        </div>
                        <!-- End InvoiceTop-->
                        <div class="row invo-profile">
                            <div class="col-xl-4">
                                <div class="media">
                                    <div class="media-left"><img class="media-object rounded-circle img-60" src="~/images/user/7.jpg" alt=""></div>
                                    <div class="media-body m-l-20">
                                        <h4 class="media-heading f-w-600">@Model.OrderPrintInformations[0]["Cari"]</h4>
                                        <p>email bilgisi<br><span class="digits">tel no</span></p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-8">
                                <div class="text-xl-end" id="project">
                                    <h6>Sipariş Açıklaması</h6>
                                    <p>açıklama Açıklama.....</p>
                                </div>
                            </div>
                        </div>
                        <!-- End Invoice Mid-->
                        <div>
                            <div class="table-responsive invoice-table" id="table">
                                <table class="table table-bordered table-striped">
                                    <tbody>
                                        <tr>
                                            <td class="item">
                                                <h6 class="p-2 mb-0">Ürün</h6>
                                            </td>
                                            <td class="Hours">
                                                <h6 class="p-2 mb-0">Adet</h6>
                                            </td>
                                            <td class="Rate">
                                                <h6 class="p-2 mb-0">Fiyat</h6>
                                            </td>
                                            <td class="subtotal">
                                                <h6 class="p-2 mb-0">Tutar</h6>
                                            </td>
                                        </tr>
                                        @foreach (var Order in Model.OrderPrintInformations)
                                        {
                                            <tr>
                                                <td>
                                                    <p class="m-0">@Order["StokaAdi"]</p>
                                                </td>
                                                <td>
                                                    <p class="itemtext digits">@Order["Adet"]</p>
                                                </td>
                                                <td>
                                                    @if (Order["StokaAdi"].ToString() == "")
                                                    {
                                                        <h6 class="mb-0 p-2">Toplam</h6>
                                                    }
                                                    else
                                                    {
                                                        <p class="itemtext digits">@Order["Fiyat"]</p>
                                                    }
                                                </td>
                                                <td>
                                                    @if (Order["StokaAdi"].ToString() == "")
                                                    {
                                                        <h6 class="mb-0 p-2">@Order["SIPTUTAR"]</h6>
                                                    }
                                                    else
                                                    {
                                                        <p class="itemtext digits">@Order["SIPTUTAR"]</p>
                                                    }

                                                </td>
                                            </tr>
                                        }
                                    </tbody>
                                </table>
                            </div>
                            <!-- End Table-->
                            <div class="row mt-3">
                                <div class="col-md-8">
                                    <div>
                                        <p class="legal"><strong>Teşekkürler!</strong></p>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                </div>
                            </div>
                        </div>
                        <!-- End InvoiceBot-->
                    </div>
                    <div class="col-sm-12 text-center mt-3">
                        <button class="btn btn btn-primary me-2" type="button" id="btnprint" readonly>Print</button>
                        <button class="btn btn btn-primary me-2" type="button" id="indirmeButonu" readonly>İndir</button>
                        <button class="btn btn btn-primary me-2" type="button" id="downloadButton" readonly>İndir Test</button>
                        <button class="btn btn-secondary" type="button">Cancel</button>
                        <button type="button" class="btn btn btn-primary me-2" onclick="applyModalStyles()" data-bs-toggle="modal" data-bs-target="#exampleModal">Print Modal</button>
                    </div>
                    <!-- End Invoice-->
                    <!-- End Invoice Holder-->
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-body">
                <div id="printableArea">
                    <div>
                        <div class="row invo-header">
                            <div class="col-sm-6">
                                <div class="media">
                                    <div class="media-left"><a href="index.html"><img class="media-object img-60" src="~/images/logo/logo-1.png" alt=""></a></div>
                                    <div class="media-body m-l-20">
                                        <h4 class="media-heading f-w-600">Sipariş Formu</h4>
                                        <p>Firmamız Bilgileri Gelicek<br><span class="digits">289-335-6503</span></p>
                                    </div>
                                </div>
                                <!-- End Info-->
                            </div>
                            <div class="col-sm-6">
                                <div class="text-md-end text-xs-center">
                                    <h3>@Model.OrderPrintInformations[0]["SipNo"]<span class="digits counter"></span></h3>
                                    <p>Sipariş Tarihi: @Model.OrderPrintInformations[0]["KTRH"]<span class="digits"></span><br>                                                            Teslim Tarihi: @Model.OrderPrintInformations[0]["TESTRH"]<span class="digits"></span></p>
                                </div>
                                <!-- End Title-->
                            </div>
                        </div>
                    </div>
                    <!-- End InvoiceTop-->
                    <div class="row invo-profile">
                        <div class="col-xl-4">
                            <div class="media">
                                <div class="media-left"><img class="media-object rounded-circle img-60" src="~/images/user/7.jpg" alt=""></div>
                                <div class="media-body m-l-20">
                                    <h4 class="media-heading f-w-600">@Model.OrderPrintInformations[0]["Cari"]</h4>
                                    <p>email bilgisi<br><span class="digits">tel no</span></p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-8">
                            <div class="text-xl-end" id="project">
                                <h6>Sipariş Açıklaması</h6>
                                <p>açıklama Açıklama.....</p>
                            </div>
                        </div>
                    </div>
                    <!-- End Invoice Mid-->
                    <div>
                        <div class="table-responsive invoice-table" id="table">
                            <table class="table table-bordered table-striped">
                                <tbody>
                                    <tr>
                                        <td class="item">
                                            <h6 class="p-2 mb-0">Ürün</h6>
                                        </td>
                                        <td class="Hours">
                                            <h6 class="p-2 mb-0">Adet</h6>
                                        </td>
                                        <td class="Rate">
                                            <h6 class="p-2 mb-0">Fiyat</h6>
                                        </td>
                                        <td class="subtotal">
                                            <h6 class="p-2 mb-0">Tutar</h6>
                                        </td>
                                    </tr>
                                    @foreach (var Order in Model.OrderPrintInformations)
                                    {
                                        <tr>
                                            <td>
                                                <p class="m-0">@Order["StokaAdi"]</p>
                                            </td>
                                            <td>
                                                <p class="itemtext digits">@Order["Adet"]</p>
                                            </td>
                                            <td>
                                                @if (Order["StokaAdi"].ToString() == "")
                                                {
                                                    <h6 class="mb-0 p-2">Toplam</h6>
                                                }
                                                else
                                                {
                                                    <p class="itemtext digits">@Order["Fiyat"]</p>
                                                }
                                            </td>
                                            <td>
                                                @if (Order["StokaAdi"].ToString() == "")
                                                {
                                                    <h6 class="mb-0 p-2">@Order["SIPTUTAR"]</h6>
                                                }
                                                else
                                                {
                                                    <p class="itemtext digits">@Order["SIPTUTAR"]</p>
                                                }

                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                        <!-- End Table-->
                        <div class="row mt-3">
                            <div class="col-md-8">
                                <div>
                                    <p class="legal"><strong>Teşekkürler!</strong></p>
                                </div>
                            </div>
                            <div class="col-md-4">
                            </div>
                        </div>
                    </div>
                    <!-- End InvoiceBot-->
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary me-2" onclick="window.print()">Yazdır</button>
            </div>
        </div>
    </div>
</div>



<script>
    //// test aşamasındaki alanlar
    // function applyModalStyles() {
    //     // Modal içeriğini seç
    //     var modalContent = document.getElementById("exampleModal");

    //     // CSS kurallarını içeren bir <style> elementi oluştur
    //     var style = document.createElement("style");
    //     style.type = "text/css";
    //     style.innerHTML = `
    //                 /* Burada modal içeriği için stil kurallarını tanımlayın */
    //                 /* Örnek: modal içeriğini merkezlemek için */
    //                        body * {
    //                         visibility: hidden;
    //                     }

    //                             #exampleModal, #exampleModal * {
    //                         visibility: visible;
    //                     }

    //                         #exampleModal {
    //                         position: absolute;
    //                         left: 0;
    //                         top: 0;
    //                     }
    //             `;

    //     // <style> elementini modal içine ekleyerek CSS kurallarını uygula
    //     modalContent.appendChild(style);
    // }

    // ////////////////////////////////////////////
    // $('#exampleModal').on('hidden.bs.modal', function (e) {
    //     resetModalStyles();
    // });

    // function resetModalStyles() {
    //     // Modal içeriğini seç
    //     var modalContent = document.getElementById("exampleModal");

    //     // Modal içeriğine eklenmiş olan stil elementini bul ve kaldır
    //     var styleElement = modalContent.querySelector("style");
    //     if (styleElement) {
    //         modalContent.removeChild(styleElement);
    //     }
    // }


    /////////////////////////////////////////////
    document.addEventListener("DOMContentLoaded", function () {
        var downloadButton = document.getElementById("downloadButton");

        downloadButton.addEventListener("click", function () {
            // HTML içeriğini seç
            var content = document.getElementById("bodyContent2");

            // html2canvas ile HTML içeriğini canvas'a dönüştür
            html2canvas(content).then(function (canvas) {
                // canvas'ı jsPDF ile kullanarak PDF'e ekleyin
                var imgData = canvas.toDataURL('image/png');
                var pdf = new jsPDF();
                pdf.addImage(imgData, 'PNG', 0, 0);
                pdf.save("ornek.pdf");
            });
        });
    });
</script>